# Tracking the exchange rate of the Czech crown
# Архитектура решения
Схема  
![Architecture](./UpdatedArchitecture.png)  
исходник в drawio [Architecture](./UpdatedArchitecture.drawio) 
Чешский национальный банк предоставляет возможность отслеживать валютный курс чешской кроны.
Ежедневный курс доступен по адресу https://www.cnb.cz/en/financial_markets/foreign_excha..
Исторические данные доступны по адресу https://www.cnb.cz/en/financial_markets/foreign_excha..
Необходимо разработать систему, состоящую из компонентов:
1) Отдельное консольное приложение для заполнения БД данными валютных курсов за 2017 и 2018 год (колонка Rate в отчётах CNB).
2) Задача по расписанию, которая сохраняет текущий курс в БД. Период запуска задаётся в конфигурации.
3) Реализовать web API, с помощью которого можно получить отчет по курсу кроны в заданный месяц/год. В отчете необходимо вывести минимальное, максимальное значение и медиану для каждой из выбранных валют отдельно, значения должны рассчитываться по неделям месяца (т.е. если в месяце 4 недели - надо вывести для каждой недели необходимые показатели). Валюты, по которым строится отчёт, задаются в конфигурации приложения. Показатели в отчёте рассчитывать для валюты в кол-ве 1 условная единица, т.е. для Amount = 1.
Например, если в конфигурации указаны валюты EUR и USD, для февраля 2018 отчет в txt формате будет следующим:
Year: 2018, month: February
Week periods:
1...2: USD - max: , min: , median: ; EUR - max: , min: , media: ;
5...9: USD - max: , min: , median: ; EUR - max: , min: , media: ;
12...16: USD - max: , min: , median: ; EUR - max: , min: , media: ;
19...23: USD - max: , min: , median: ; EUR - max: , min: , media: ;
26...28: USD - max: , min: , median: ; EUR - max: , min: , media: ;
Предусмотреть вывод отчёта в двух форматах — txt и JSON (тип передаётся в параметрах запроса, формат вывода для JSON придумать самостоятельно).
Используемые технологии: .net core, entity framework. По остальным технологиям, которые могут понадобиться для выполнения задания - на ваш выбор.
Heroku https://ozexchangerate.herokuapp.com/ 


### Основные сервисы:
#### BTBСonnector
Service for downloading data from BTB Bank. Implements a console application for downloading / receiving data from remote (BTB Bank).
[Readme](./Services/BTBConnector/Readme.md)
#### Loader
Service collects data from different suppliers and converts them to the required type for storage in a database. Implements a console application with methods for getting, transforming, saving data to a database. 
[Readme](./Services/Loader/Readme.md)
#### ReportApi 
Service for providing data to the user by currency. Implements API and logic for issuing reports in two formats(txt,json) for a specific period.
[Readme](./Services/ReportApi/Readme.md)
#### Scheduler 
Service for creating scheduled tasks. Implements API and logic for adding / editing scheduled tasks 
[Readme](./Services/Scheduler/Readme.md)
